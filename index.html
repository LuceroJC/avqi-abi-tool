<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>AVQI & ABI Analyzer - Multiparametric Voice Quality Assessment | Phonalab</title>
    <meta name="title" content="AVQI & ABI Analyzer - Multiparametric Voice Quality Assessment | Phonalab">
    <meta name="description" content="First web-based AVQI and ABI calculator. Validated multiparametric indices for Brazilian Portuguese. Professional voice quality and breathiness assessment combining 6+9 acoustic parameters into validated clinical scores.">
    <meta name="keywords" content="AVQI calculator, ABI calculator, acoustic voice quality index, acoustic breathiness index, multiparametric voice analysis, dysphonia severity, breathiness measurement, voice quality assessment, Brazilian Portuguese validation, Englert protocol, continuous speech analysis, sustained vowel analysis">
    <meta name="author" content="Dr. Jorge C. Lucero">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://avqi.phonalab.com">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://avqi.phonalab.com">
    <meta property="og:title" content="AVQI & ABI Analyzer - Multiparametric Voice Quality Assessment">
    <meta property="og:description" content="First web-based AVQI and ABI calculator. Validated multiparametric analysis for Brazilian Portuguese with professional clinical interpretation.">
    <meta property="og:image" content="https://phonalab.com/og-avqi-abi.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://avqi.phonalab.com">
    <meta property="twitter:title" content="AVQI & ABI Analyzer - Multiparametric Voice Quality Assessment">
    <meta property="twitter:description" content="First web-based AVQI and ABI calculator. Validated multiparametric analysis for Brazilian Portuguese.">
    <meta property="twitter:image" content="https://phonalab.com/twitter-avqi-abi.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="manifest" href="site.webmanifest" />
    
    <!-- Schema.org for AVQI/ABI Tool -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Phonalab AVQI & ABI Analyzer",
      "applicationCategory": "HealthApplication",
      "operatingSystem": "Web browser",
      "description": "Web-based AVQI and ABI calculator for multiparametric voice quality and breathiness assessment, validated for Brazilian Portuguese",
      "url": "https://avqi.phonalab.com",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "AVQI (Acoustic Voice Quality Index) calculation",
        "ABI (Acoustic Breathiness Index) calculation",
        "6-parameter AVQI analysis (CPPS, HNR, shimmer, shimmer dB, slope, tilt)",
        "9-parameter ABI analysis",
        "Validated for Brazilian Portuguese",
        "Counting 1-11 + sustained /a/ protocol",
        "Clinical interpretation with cutoff points",
        "PDF report generation",
        "Component parameter breakdown"
      ],
      "audience": {
        "@type": "PeopleAudience",
        "audienceType": "Speech-language pathologists, voice therapists, laryngologists, voice researchers"
      }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --bg: #f9fafb;
            --white: #ffffff;
            --text: #1f2937;
            --text-light: #6b7280;
            --border: #e5e7eb;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .header {
            background: var(--white);
            border-bottom: 1px solid var(--border);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--text);
            text-decoration: none;
            transition: color 0.3s;
            font-weight: 500;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        /* Dropdown Menu */
        .dropdown {
            position: relative;
        }

        .dropdown-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            color: var(--text);
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s;
        }

        .dropdown-toggle:hover {
            background: var(--bg);
            color: var(--primary);
        }

        .dropdown-arrow {
            font-size: 0.7rem;
            transition: transform 0.3s;
        }

        .dropdown.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 220px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s;
            z-index: 1000;
            margin-top: 0.5rem;
        }

        .dropdown.active .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-menu a {
            display: block;
            padding: 0.75rem 1.25rem;
            color: var(--text);
            text-decoration: none;
            transition: all 0.3s;
            border-bottom: 1px solid var(--border);
        }

        .dropdown-menu a:last-child {
            border-bottom: none;
        }

        .dropdown-menu a:hover {
            background: var(--bg);
            color: var(--primary);
            padding-left: 1.5rem;
        }

        .dropdown-menu a:first-child {
            border-radius: 8px 8px 0 0;
        }

        .dropdown-menu a:last-child {
            border-radius: 0 0 8px 8px;
        }

        /* Mobile Menu */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text);
            cursor: pointer;
            padding: 0.5rem;
        }

        .mobile-menu {
            display: none;
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            background: var(--white);
            border-bottom: 1px solid var(--border);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 999;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .mobile-menu.active {
            max-height: 500px;
        }

        .mobile-menu nav {
            padding: 1rem 0;
        }

        .mobile-menu a {
            display: block;
            padding: 0.75rem 40px;
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
        }

        .mobile-menu a:hover {
            background: var(--bg);
            color: var(--primary);
            padding-left: 50px;
        }

        .mobile-tools-section {
            border-top: 1px solid var(--border);
            margin-top: 0.5rem;
            padding-top: 0.5rem;
        }

        .mobile-tools-header {
            padding: 0.5rem 40px;
            color: var(--text-light);
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 40px;
        }

        .tool-header {
            padding: 60px 0 40px;
            text-align: left;
        }

        .tool-header h1 {
            font-size: 2.5rem;
            color: var(--text);
            margin-bottom: 0.75rem;
            font-weight: 700;
        }

        .tool-header .subtitle {
            color: var(--text-light);
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
        }

        .badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .info-box {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-left: 4px solid var(--primary);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .info-box p {
            color: var(--text);
            line-height: 1.6;
            margin: 0.5rem 0;
        }

        .info-box strong {
            color: var(--primary);
        }

        .validation-badge {
            background: rgba(59, 130, 246, 0.1);
            border: 2px solid var(--info);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .validation-badge-icon {
            font-size: 2.5rem;
        }

        .validation-badge-text {
            flex: 1;
        }

        .validation-badge-text strong {
            color: var(--info);
            display: block;
            margin-bottom: 0.25rem;
            font-size: 1.1rem;
        }

        .validation-badge-text p {
            margin: 0;
            font-size: 0.95rem;
            color: var(--text-light);
        }

        .protocol-steps {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }

        .protocol-steps h3 {
            color: var(--text);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }

        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .step-item {
            text-align: center;
            padding: 1.5rem;
            background: var(--bg);
            border-radius: 8px;
            transition: transform 0.2s;
        }

        .step-item:hover {
            transform: translateY(-2px);
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            margin: 0 auto 1rem;
        }

        .step-item h4 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .step-item p {
            font-size: 0.9rem;
            color: var(--text-light);
            margin: 0;
        }

        .dual-upload-section {
            background: var(--white);
            border-radius: 12px;
            padding: 3rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }

        .upload-header {
            margin-bottom: 2rem;
        }

        .upload-header h2 {
            font-size: 1.75rem;
            margin-bottom: 0.75rem;
        }

        .upload-header p {
            color: var(--text-light);
            font-size: 1rem;
        }

        .upload-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .upload-box {
            border: 2px dashed var(--border);
            border-radius: 12px;
            padding: 2.5rem 2rem;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            background: var(--bg);
            position: relative;
        }

        .upload-box:hover:not(.uploaded) {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
            transform: translateY(-2px);
        }

        .upload-box.uploaded {
            border-color: var(--success);
            border-style: solid;
            background: rgba(16, 185, 129, 0.05);
        }

        .upload-number {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: var(--primary);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .upload-box.uploaded .upload-number {
            background: var(--success);
        }

        .upload-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
        }

        .upload-box h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .upload-box > p {
            color: var(--text-light);
            font-size: 0.95rem;
            margin: 0.5rem 0 1rem;
        }

        .upload-requirements {
            background: white;
            border-radius: 6px;
            padding: 1rem;
            margin-top: 1rem;
            text-align: left;
        }

        .upload-requirements strong {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text);
            font-size: 0.9rem;
        }

        .upload-requirements ul {
            list-style: none;
            padding-left: 0;
        }

        .upload-requirements li {
            padding: 0.25rem 0;
            color: var(--text-light);
            font-size: 0.85rem;
        }

        .upload-requirements li::before {
            content: "✓ ";
            color: var(--success);
            font-weight: bold;
            margin-right: 0.5rem;
        }

        .file-input {
            display: none;
        }

        .upload-button {
            background: var(--primary);
            color: white;
            padding: 12px 28px;
            border: none;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .upload-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .audio-preview {
            margin-top: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 6px;
            display: none;
        }

        .audio-preview p {
            font-size: 0.9rem;
            color: var(--success);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .audio-preview audio {
            width: 100%;
        }

        .analyze-button {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            padding: 18px 48px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: none;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            width: 100%;
        }

        .analyze-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        .analyze-button:disabled {
            background: var(--text-light);
            cursor: not-allowed;
            box-shadow: none;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 3rem 0;
            padding: 3rem;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .spinner {
            border: 4px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1.5rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading p {
            font-size: 1.1rem;
            color: var(--text);
        }

        .loading p:last-child {
            color: var(--text-light);
            font-size: 0.95rem;
            margin-top: 0.5rem;
        }

        .results-section {
            display: none;
            animation: fadeIn 0.6s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .avqi-abi-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .score-card {
            background: var(--white);
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .score-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
        }

        .score-card.normal::before {
            background: linear-gradient(90deg, var(--success), #059669);
        }

        .score-card.elevated::before {
            background: linear-gradient(90deg, var(--warning), #d97706);
        }

        .score-card h2 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .score-card .score {
            font-size: 4.5rem;
            font-weight: 700;
            color: var(--text);
            margin: 1rem 0;
            line-height: 1;
        }

        .score-card .cutoff {
            font-size: 1rem;
            color: var(--text-light);
            margin-bottom: 1rem;
        }

        .score-card .status {
            display: inline-block;
            padding: 10px 24px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1rem;
        }

        .status.normal-status {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
        }

        .status.elevated-status {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
        }

        .components-detail {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }

        .components-detail summary {
            cursor: pointer;
            color: var(--primary);
            font-weight: 600;
            font-size: 0.9rem;
            text-align: left;
            padding: 0.5rem;
        }

        .components-detail summary:hover {
            color: var(--primary-dark);
        }

        .component-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-top: 1rem;
            text-align: left;
            font-size: 0.85rem;
        }

        .component-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem;
            background: var(--bg);
            border-radius: 4px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .result-card {
            background: var(--white);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.2s;
        }

        .result-card:hover {
            transform: translateY(-2px);
        }

        .result-label {
            color: var(--text-light);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text);
        }

        .result-status {
            font-size: 0.8rem;
            margin-top: 0.5rem;
            color: var(--text-light);
        }

        .interpretation {
            background: var(--white);
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin: 2rem 0;
        }

        .interpretation h2 {
            margin-bottom: 1.5rem;
            font-size: 1.75rem;
        }

        .interpretation-list {
            list-style: none;
        }

        .interpretation-list li {
            padding: 0.75rem 0;
            display: flex;
            align-items: start;
        }

        .interpretation-list li::before {
            content: "→";
            color: var(--primary);
            margin-right: 1rem;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .button {
            padding: 14px 32px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .button-primary {
            background: var(--primary);
            color: white;
        }

        .button-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .button-secondary {
            background: white;
            color: var(--text);
            border: 2px solid var(--border);
        }

        .button-secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        footer {
            padding: 3rem 0;
            text-align: center;
            color: var(--text-light);
            background: var(--white);
            border-top: 1px solid var(--border);
            margin-top: 4rem;
        }

        footer p {
            margin: 0.5rem 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 20px;
            }

            .header-content {
                padding: 0 20px;
            }

            .tool-header {
                padding: 40px 0 30px;
            }

            .tool-header h1 {
                font-size: 2rem;
            }

            .upload-grid {
                grid-template-columns: 1fr;
            }

            .avqi-abi-cards {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .button {
                width: 100%;
            }

            .component-list {
                grid-template-columns: 1fr;
            }

            .nav-links {
                display: none;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .mobile-menu {
                display: block;
            }

            .steps-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="https://phonalab.com" class="logo">🔬 Phonalab</a>
            
            <nav class="nav-links">
                <a href="https://phonalab.com">Home</a>
                
                <div class="dropdown" id="toolsDropdown">
                    <div class="dropdown-toggle">
                        <span>Tools</span>
                        <span class="dropdown-arrow">▼</span>
                    </div>
                    <div class="dropdown-menu">
                        <a href="https://analyzer.phonalab.com">🎤 Voice Analyzer</a>
                        <a href="https://avqi.phonalab.com">📊 AVQI & ABI</a>
                        <a href="https://pitch.phonalab.com">🎵 Pitch Visualizer</a>
                    </div>
                </div>
                
                <a href="https://phonalab.com#about">About</a>
                <a href="https://forms.gle/oZvWFGcHwr7VFNRAA" target="_blank">Feedback</a>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="tool-header">
            <div class="badge">✨ World's First Web-Based AVQI & ABI Calculator</div>
            <h1>AVQI & ABI Analyzer</h1>
            <p class="subtitle">Professional multiparametric voice quality and breathiness assessment</p>
        </div>

        <div class="validation-badge">
            <div class="validation-badge-icon">🇧🇷</div>
            <div class="validation-badge-text">
                <strong>Validated for Brazilian Portuguese</strong>
                <p>Using validated cutoff points: AVQI > 1.33 and ABI > 2.94 for dysphonia detection. Based on peer-reviewed research and clinical validation studies.</p>
            </div>
        </div>

        <div class="info-box">
            <p><strong>🎯 What are AVQI and ABI?</strong></p>
            <p><strong>AVQI (Acoustic Voice Quality Index)</strong> combines 6 acoustic parameters into a single validated score for overall dysphonia severity. Validated for Brazilian Portuguese using counting 1-11 + sustained /a/.</p>
            <p style="margin-top: 0.75rem;"><strong>ABI (Acoustic Breathiness Index)</strong> combines 9 acoustic parameters specifically designed to quantify breathiness perception. Uses the same protocol: counting 1-11 + sustained /a/.</p>
            <p style="margin-top: 0.75rem; font-size: 0.9rem; color: var(--text-light);"><em>Protocol validated by Englert et al. (2021) for Brazilian Portuguese with 150 subjects.</em></p>
        </div>

        <div class="protocol-steps">
            <h3>📋 Standard AVQI/ABI Protocol</h3>
            <div class="steps-grid">
                <div class="step-item">
                    <div class="step-number">1</div>
                    <h4>Record Speech</h4>
                    <p>Patient counting numbers 1-11 at normal volume and pace</p>
                </div>
                <div class="step-item">
                    <div class="step-number">2</div>
                    <h4>Record Vowel</h4>
                    <p>3-5 seconds of sustained /a/ at comfortable pitch</p>
                </div>
                <div class="step-item">
                    <div class="step-number">3</div>
                    <h4>Upload Both</h4>
                    <p>Analysis requires both recordings for accurate calculation</p>
                </div>
                <div class="step-item">
                    <div class="step-number">4</div>
                    <h4>Get Results</h4>
                    <p>AVQI and ABI scores with clinical interpretation</p>
                </div>
            </div>
        </div>

        <div class="dual-upload-section">
            <div class="upload-header">
                <h2>Upload Two Recordings</h2>
                <p>AVQI and ABI require counting numbers 1-11 and sustained vowel /a/ for accurate calculation (validated protocol for Brazilian Portuguese)</p>
            </div>

            <div class="upload-grid">
                <div class="upload-box" id="csUploadBox" onclick="document.getElementById('csFileInput').click()">
                    <div class="upload-number">1</div>
                    <div class="upload-icon">🔢</div>
                    <h3>Counting Numbers 1-11</h3>
                    <p>Patient counting from one to eleven</p>
                    
                    <div class="upload-requirements">
                        <strong>Recording Guidelines:</strong>
                        <ul>
                            <li>Count 1, 2, 3... up to 11</li>
                            <li>Normal speaking voice</li>
                            <li>Steady, conversational pace</li>
                            <li>Quiet environment</li>
                        </ul>
                    </div>
                    
                    <input type="file" id="csFileInput" class="file-input" accept="audio/*">
                    <button class="upload-button" onclick="event.stopPropagation(); document.getElementById('csFileInput').click()">Choose File</button>
                    
                    <div class="audio-preview" id="csPreview">
                        <p>✓ File uploaded successfully</p>
                        <audio id="csAudio" controls></audio>
                    </div>
                </div>

                <div class="upload-box" id="svUploadBox" onclick="document.getElementById('svFileInput').click()">
                    <div class="upload-number">2</div>
                    <div class="upload-icon">🎵</div>
                    <h3>Sustained Vowel /a/</h3>
                    <p>Patient sustaining "aahhh" vowel</p>
                    
                    <div class="upload-requirements">
                        <strong>Recording Guidelines:</strong>
                        <ul>
                            <li>3-5 seconds duration</li>
                            <li>Steady pitch and volume</li>
                            <li>Don't fade at end</li>
                            <li>One continuous breath</li>
                        </ul>
                    </div>
                    
                    <input type="file" id="svFileInput" class="file-input" accept="audio/*">
                    <button class="upload-button" onclick="event.stopPropagation(); document.getElementById('svFileInput').click()">Choose File</button>
                    
                    <div class="audio-preview" id="svPreview">
                        <p>✓ File uploaded successfully</p>
                        <audio id="svAudio" controls></audio>
                    </div>
                </div>
            </div>

            <button class="analyze-button" id="analyzeButton" onclick="analyzeVoice()">
                🔬 Calculate AVQI & ABI
            </button>
        </div>

        <div class="loading" id="loadingSection">
            <div class="spinner"></div>
            <p style="font-size: 1.2rem; font-weight: 600;">Calculating AVQI and ABI...</p>
            <p style="color: var(--text-light); font-size: 0.95rem; margin-top: 0.5rem;">
                Analyzing multiparametric indices • This may take 15-20 seconds
            </p>
        </div>

        <div class="results-section" id="resultsSection">
            <h2 style="font-size: 2rem; margin-bottom: 2rem;">Analysis Results</h2>

            <div class="avqi-abi-cards">
                <div class="score-card normal" id="avqiCard">
                    <h2>AVQI Score</h2>
                    <div class="score" id="avqiScore">--</div>
                    <div class="cutoff">Cutoff: > 1.33 indicates dysphonia</div>
                    <div class="status normal-status" id="avqiStatus">Loading...</div>
                    
                    <details class="components-detail">
                        <summary>View 6 component parameters →</summary>
                        <div class="component-list" id="avqiComponents"></div>
                    </details>
                </div>

                <div class="score-card normal" id="abiCard">
                    <h2>ABI Score</h2>
                    <div class="score" id="abiScore">--</div>
                    <div class="cutoff">Cutoff: > 2.94 indicates breathiness</div>
                    <div class="status normal-status" id="abiStatus">Loading...</div>
                    
                    <details class="components-detail">
                        <summary>View 9 component parameters →</summary>
                        <div class="component-list" id="abiComponents"></div>
                    </details>
                </div>
            </div>

            <div class="interpretation">
                <h2>Clinical Interpretation</h2>
                <div id="interpretationText">
                    <ul class="interpretation-list" id="interpretationList"></ul>
                </div>
            </div>

            <div style="background: var(--white); border-radius: 12px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                <h3 style="margin-bottom: 1.5rem;">Traditional Acoustic Parameters</h3>
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-label">F0 Mean</div>
                        <div class="result-value" id="f0Value">--</div>
                        <div class="result-status" id="f0Status"></div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Jitter</div>
                        <div class="result-value" id="jitterValue">--</div>
                        <div class="result-status" id="jitterStatus"></div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">Shimmer</div>
                        <div class="result-value" id="shimmerValue">--</div>
                        <div class="result-status" id="shimmerStatus"></div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">HNR</div>
                        <div class="result-value" id="hnrValue">--</div>
                        <div class="result-status" id="hnrStatus"></div>
                    </div>
                    <div class="result-card">
                        <div class="result-label">CPP</div>
                        <div class="result-value" id="cppValue">--</div>
                        <div class="result-status" id="cppStatus"></div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="button button-primary" onclick="downloadPDF()">
                    📄 Download PDF Report
                </button>
                <button class="button button-secondary" onclick="analyzeAnother()">
                    🔄 Analyze Another Patient
                </button>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p><strong>Phonalab</strong> - Professional Voice Analysis Tools</p>
            <p style="font-size: 0.9rem; margin-top: 0.5rem;">
                © 2025 Jorge C. Lucero, University of Brasília • For clinical correlation only
            </p>
        </div>
    </footer>

    <script>
        const API_URL = 'https://voice-analyzer-api.onrender.com';
        let csFile = null;
        let svFile = null;
        let currentResults = null;

        // Dropdown toggle for desktop
        const toolsDropdown = document.getElementById('toolsDropdown');
        const dropdownToggle = toolsDropdown.querySelector('.dropdown-toggle');
        
        dropdownToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            toolsDropdown.classList.toggle('active');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!toolsDropdown.contains(e.target)) {
                toolsDropdown.classList.remove('active');
            }
        });
        
        // Mobile menu toggle
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const mobileMenu = document.getElementById('mobileMenu');
        
        mobileMenuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('active');
            mobileMenuToggle.textContent = mobileMenu.classList.contains('active') ? '✕' : '☰';
        });
        
        // Close mobile menu when clicking a link
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.remove('active');
                mobileMenuToggle.textContent = '☰';
            });
        });

        // Continuous Speech file handler
        document.getElementById('csFileInput').addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleCSFile(e.target.files[0]);
            }
        });

        // Sustained Vowel file handler
        document.getElementById('svFileInput').addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleSVFile(e.target.files[0]);
            }
        });

        function handleCSFile(file) {
            if (!file.type.startsWith('audio/')) {
                alert('Please upload an audio file');
                return;
            }

            if (file.size > 50 * 1024 * 1024) {
                alert('File size must be less than 50MB');
                return;
            }

            csFile = file;
            document.getElementById('csUploadBox').classList.add('uploaded');
            document.getElementById('csPreview').style.display = 'block';
            document.getElementById('csAudio').src = URL.createObjectURL(csFile);
            checkBothFilesUploaded();
        }

        function handleSVFile(file) {
            if (!file.type.startsWith('audio/')) {
                alert('Please upload an audio file');
                return;
            }

            if (file.size > 50 * 1024 * 1024) {
                alert('File size must be less than 50MB');
                return;
            }

            svFile = file;
            document.getElementById('svUploadBox').classList.add('uploaded');
            document.getElementById('svPreview').style.display = 'block';
            document.getElementById('svAudio').src = URL.createObjectURL(svFile);
            checkBothFilesUploaded();
        }

        function checkBothFilesUploaded() {
            if (csFile && svFile) {
                document.getElementById('analyzeButton').style.display = 'block';
            }
        }

        async function analyzeVoice() {
            const button = document.getElementById('analyzeButton');
            button.disabled = true;
            document.getElementById('loadingSection').style.display = 'block';
            document.getElementById('resultsSection').style.display = 'none';

            try {
                const formData = new FormData();
                formData.append('continuous_speech', csFile);
                formData.append('sustained_vowel', svFile);

                const response = await fetch(`${API_URL}/analyze-full`, {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error || `Server returned ${response.status}`);
                }

                const data = await response.json();
                currentResults = data;
                displayResults(data);

            } catch (error) {
                console.error('Analysis error:', error);
                alert('Analysis error: ' + error.message + '\n\nPlease ensure both audio files are valid and try again.');
            } finally {
                document.getElementById('loadingSection').style.display = 'none';
                button.disabled = false;
            }
        }

        function displayResults(data) {
            // AVQI
            const avqiScore = data.avqi.score;
            document.getElementById('avqiScore').textContent = avqiScore.toFixed(2);
            document.getElementById('avqiStatus').textContent = data.avqi.status;
            
            const avqiCard = document.getElementById('avqiCard');
            const avqiStatus = document.getElementById('avqiStatus');
            
            if (avqiScore > 1.33) {
                avqiCard.classList.remove('normal');
                avqiCard.classList.add('elevated');
                avqiStatus.classList.remove('normal-status');
                avqiStatus.classList.add('elevated-status');
            }

            // AVQI Components
            if (data.avqi.components) {
                const avqiComp = document.getElementById('avqiComponents');
                avqiComp.innerHTML = Object.entries(data.avqi.components)
                    .map(([key, val]) => `
                        <div class="component-item">
                            <span>${key.toUpperCase()}</span>
                            <strong>${typeof val === 'number' ? val.toFixed(3) : val}</strong>
                        </div>
                    `).join('');
            }

            // ABI
            const abiScore = data.abi.score;
            document.getElementById('abiScore').textContent = abiScore.toFixed(2);
            document.getElementById('abiStatus').textContent = data.abi.status;
            
            const abiCard = document.getElementById('abiCard');
            const abiStatus = document.getElementById('abiStatus');
            
            if (abiScore > 2.94) {
                abiCard.classList.remove('normal');
                abiCard.classList.add('elevated');
                abiStatus.classList.remove('normal-status');
                abiStatus.classList.add('elevated-status');
            }

            // ABI Components
            if (data.abi.components) {
                const abiComp = document.getElementById('abiComponents');
                abiComp.innerHTML = Object.entries(data.abi.components)
                    .map(([key, val]) => `
                        <div class="component-item">
                            <span>${key.toUpperCase()}</span>
                            <strong>${typeof val === 'number' ? val.toFixed(3) : val}</strong>
                        </div>
                    `).join('');
            }

            // Traditional parameters
            document.getElementById('f0Value').textContent = data.f0.mean.toFixed(1) + ' Hz';
            document.getElementById('f0Status').textContent = data.f0.status || '';
            
            document.getElementById('jitterValue').textContent = data.jitter.percent.toFixed(2) + '%';
            document.getElementById('jitterStatus').textContent = data.jitter.status || '';
            
            document.getElementById('shimmerValue').textContent = data.shimmer.percent.toFixed(2) + '%';
            document.getElementById('shimmerStatus').textContent = data.shimmer.status || '';
            
            document.getElementById('hnrValue').textContent = data.hnr.mean.toFixed(1) + ' dB';
            document.getElementById('hnrStatus').textContent = data.hnr.status || '';
            
            document.getElementById('cppValue').textContent = data.cpp.value.toFixed(2) + ' dB';
            document.getElementById('cppStatus').textContent = data.cpp.status || '';

            // Interpretation
            const list = document.getElementById('interpretationList');
            list.innerHTML = '';
            
            if (data.interpretation) {
                const overall = document.createElement('li');
                overall.innerHTML = `<strong>${data.interpretation.overall_assessment || 'Analysis complete'}</strong>`;
                list.appendChild(overall);

                if (data.interpretation.concerns && data.interpretation.concerns.length > 0) {
                    const concernsHeader = document.createElement('li');
                    concernsHeader.innerHTML = '<strong style="color: var(--warning);">Key Concerns:</strong>';
                    list.appendChild(concernsHeader);
                    
                    data.interpretation.concerns.forEach(concern => {
                        const li = document.createElement('li');
                        li.textContent = concern;
                        li.style.marginLeft = '1.5rem';
                        list.appendChild(li);
                    });
                }

                if (data.interpretation.recommendations && data.interpretation.recommendations.length > 0) {
                    const recsHeader = document.createElement('li');
                    recsHeader.innerHTML = '<strong style="color: var(--primary);">Recommendations:</strong>';
                    list.appendChild(recsHeader);
                    
                    data.interpretation.recommendations.forEach(rec => {
                        const li = document.createElement('li');
                        li.textContent = rec;
                        li.style.marginLeft = '1.5rem';
                        list.appendChild(li);
                    });
                }
            }

            // Show results
            document.getElementById('resultsSection').style.display = 'block';
            
            // Scroll to results
            setTimeout(() => {
                document.getElementById('resultsSection').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }, 300);
        }

        async function downloadPDF() {
            if (!currentResults) {
                alert('No analysis results available. Please analyze recordings first.');
                return;
            }

            const button = event.target;
            const originalText = button.textContent;
            
            try {
                button.textContent = '⏳ Generating PDF...';
                button.disabled = true;

                const response = await fetch(`${API_URL}/generate-pdf`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        report_type: 'avqi',
                        analysis_results: currentResults,
                        patient_info: null
                    })
                });

                if (!response.ok) {
                    throw new Error(`Server returned ${response.status}`);
                }

                const blob = await response.blob();
                const fileName = `avqi_abi_report_${new Date().toISOString().slice(0,10)}.pdf`;
                
                const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                
                if (isMobile) {
                    const url = URL.createObjectURL(blob);
                    window.open(url, '_blank');
                    setTimeout(() => URL.revokeObjectURL(url), 1000);
                } else {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = fileName;
                    link.style.display = 'none';
                    document.body.appendChild(link);
                    link.click();
                    setTimeout(() => {
                        document.body.removeChild(link);
                        URL.revokeObjectURL(url);
                    }, 200);
                }

                button.textContent = '✅ Downloaded!';
                button.style.background = '#10b981';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.disabled = false;
                }, 2500);

            } catch (error) {
                console.error('PDF Error:', error);
                alert('Could not generate PDF: ' + error.message);
                button.textContent = originalText;
                button.disabled = false;
            }
        }

        function analyzeAnother() {
            csFile = null;
            svFile = null;
            currentResults = null;
            
            document.getElementById('csUploadBox').classList.remove('uploaded');
            document.getElementById('svUploadBox').classList.remove('uploaded');
            document.getElementById('csPreview').style.display = 'none';
            document.getElementById('svPreview').style.display = 'none';
            document.getElementById('analyzeButton').style.display = 'none';
            document.getElementById('resultsSection').style.display = 'none';
            
            document.getElementById('csFileInput').value = '';
            document.getElementById('svFileInput').value = '';
            
            // Reset score cards to normal
            document.getElementById('avqiCard').className = 'score-card normal';
            document.getElementById('abiCard').className = 'score-card normal';
            document.getElementById('avqiStatus').className = 'status normal-status';
            document.getElementById('abiStatus').className = 'status normal-status';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
    <!-- Vercel Analytics -->
    <script defer src="/_vercel/insights/script.js"></script>
</body>
</html><a href="https://forms.gle/oZvWFGcHwr7VFNRAA" target="_blank">Feedback</a>
            </nav>
            
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                ☰
            </button>
        </div>
        
        <div class="mobile-menu" id="mobileMenu">
            <nav>
                <a href="https://phonalab.com">Home</a>
                
                <div class="mobile-tools-section">
                    <div class="mobile-tools-header">Tools</div>
                    <a href="https://analyzer.phonalab.com">🎤 Voice Analyzer</a>
                    <a href="https://avqi.phonalab.com">📊 AVQI & ABI</a>
                    <a href="https://pitch.phonalab.com">🎵 Pitch Visualizer</a>
                </div>
                
                <a href="https://phonalab.com#about">About</a>
                